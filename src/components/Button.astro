---
interface Props {
  id?: string;
  href?: string;
}

const { id, href } = Astro.props;

const baseUrl = import.meta.env.BASE_URL.replace(/\/+$/, '') || '/docs';
const finalHref = id ? `${baseUrl}/${id}` : href;
const target = id ? '_self' : '_blank';
const rel = target === '_blank' ? 'noopener noreferrer' : undefined;
---

<div class="button-container">
  <a 
    href={finalHref} 
    target={target}
    rel={rel}
    class="doc-button"
  >
    <slot />
  </a>
</div>

<style>
  .button-container {
    display: flex;
    justify-content: flex-start;
    margin: 1.25rem 0;
    width: 100%;
  }

  /* Use extremely specific selector to override any global markdown link styles */
  .button-container a.doc-button {
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    
    /* Height and Padding */
    height: 40px !important;
    padding: 0 20px !important;
    
    /* Typography */
    font-size: 16px !important;
    font-weight: 600 !important;
    line-height: normal !important;
    text-align: center !important;
    text-decoration: none !important;
    
    /* Colors */
    color: #ffffff !important;
    background: #6720ff !important;
    
    /* Border and Shape */
    border: none !important;
    border-radius: 12px !important;
    
    /* Effects */
    transition: all 0.2s ease-in-out !important;
    box-shadow: 0 4px 12px rgba(103, 32, 255, 0.3) !important;
    cursor: pointer !important;
  }

  .button-container a.doc-button:hover {
    background: #5816e8 !important;
    box-shadow: 0 6px 20px rgba(103, 32, 255, 0.4) !important;
    transform: translateY(-1px) !important;
    color: #ffffff !important;
    text-decoration: none !important;
  }

  .button-container a.doc-button:active {
    scale: 0.98 !important;
    transform: translateY(0) !important;
  }

  /* Dark mode specific overrides for better contrast */
  :global(.dark) .button-container a.doc-button {
    background: #7c3aed !important;
    box-shadow: 0 4px 12px rgba(124, 58, 237, 0.4) !important;
  }

  :global(.dark) .button-container a.doc-button:hover {
    background: #8b5cf6 !important;
    box-shadow: 0 6px 20px rgba(139, 92, 246, 0.5) !important;
  }
</style>
